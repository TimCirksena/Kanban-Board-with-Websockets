<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Registrierung</title>
</head>
<body>
<a href="/" class="back-button">Back</a>
    <h1>Registrierung</h1>
  <form>
      <label for="username"><b>Nutzername</b></label>
      <input type="text" placeholder="Nutzername" name="username" id="username" required>

      <label for="password"><b>Password</b></label>
      <input type="password" placeholder="Passwort" name="password" id="password" required>

      <input type="button" value="Registrieren" onclick="registerKunde()">
  </form>
    <button onclick="location.href='/kanban'" type="button">
        Zum Login</button>
<script type="text/javascript">
    function registerKunde(){
        let username = document.getElementById("username");
        let password = document.getElementById("password");

        let obj = new Object();
        obj.username = username.value;
        obj.password = password.value;

        console.log(obj);

        fetch("/register", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(obj)
        }).then(function (response) {
            // popups erstellen, die dem user feedback geben
            if (response.ok) {
                console.log("Nutzer erstellt!");
            } else {
                alert("Fehler bei erstellen des Nutzers " + response.status);
            }
        })
            .catch(function (error) {
                alert("Fehler bei erstellen des Nutzers: " + error);
            });
    }
</script>
</body>
</html>